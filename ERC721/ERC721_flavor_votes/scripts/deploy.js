const { ethers } = require('ethers');
const fs = require('fs');
const path = require('path');

// Pre-compiled contract bytecode and ABI
const CONTRACT_BYTECODE = "0x610160604052348015610010575f5ffd5b50604051614ad3380380614ad38339818101604052810190610032919061053e565b826040518060400160405280600181526020017f3100000000000000000000000000000000000000000000000000000000000000815250828585815f908161007a91906107d6565b50806001908161008a91906107d6565b5050505f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036100fd575f6040517f1e4fbdf70000000000000000000000000000000000000000000000000000000081526004016100f491906108b4565b60405180910390fd5b61010c816101bf60201b60201c565b5061012160078361028260201b90919060201c565b610120818152505061013d60088261028260201b90919060201c565b6101408181525050818051906020012060e08181525050808051906020012061010081815250504660a0818152505061017a6102cf60201b60201c565b608081815250503073ffffffffffffffffffffffffffffffffffffffff1660c08173ffffffffffffffffffffffffffffffffffffffff16815250505050505050610a40565b5f60065f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508160065f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b5f6020835110156102a35761029c8361032960201b60201c565b90506102c9565b826102b38361038e60201b60201c565b5f0190816102c191906107d6565b5060ff5f1b90505b92915050565b5f7f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60e05161010051463060405160200161030e9594939291906108f4565b60405160208183030381529060405280519060200120905090565b5f5f829050601f8151111561037557826040517f305a27a900000000000000000000000000000000000000000000000000000000815260040161036c919061098d565b60405180910390fd5b805181610381906109da565b5f1c175f1b915050919050565b5f819050919050565b5f604051905090565b5f5ffd5b5f5ffd5b5f5ffd5b5f5ffd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b6103f6826103b0565b810181811067ffffffffffffffff82111715610415576104146103c0565b5b80604052505050565b5f610427610397565b905061043382826103ed565b919050565b5f67ffffffffffffffff821115610452576104516103c0565b5b61045b826103b0565b9050602081019050919050565b8281835e5f83830152505050565b5f61048861048384610438565b61041e565b9050828152602081018484840111156104a4576104a36103ac565b5b6104af848285610468565b509392505050565b5f82601f8301126104cb576104ca6103a8565b5b81516104db848260208601610476565b91505092915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f61050d826104e4565b9050919050565b61051d81610503565b8114610527575f5ffd5b50565b5f8151905061053881610514565b92915050565b5f5f5f60608486031215610555576105546103a0565b5b5f84015167ffffffffffffffff811115610572576105716103a4565b5b61057e868287016104b7565b935050602084015167ffffffffffffffff81111561059f5761059e6103a4565b5b6105ab868287016104b7565b92505060406105bc8682870161052a565b9150509250925092565b5f81519050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f600282049050600182168061061457607f821691505b602082108103610627576106266105d0565b5b50919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f600883026106897fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8261064e565b610693868361064e565b95508019841693508086168417925050509392505050565b5f819050919050565b5f819050919050565b5f6106d76106d26106cd846106ab565b6106b4565b6106ab565b9050919050565b5f819050919050565b6106f0836106bd565b6107046106fc826106de565b84845461065a565b825550505050565b5f5f905090565b61071b61070c565b6107268184846106e7565b505050565b5b818110156107495761073e5f82610713565b60018101905061072c565b5050565b601f82111561078e5761075f8161062d565b6107688461063f565b81016020851015610777578190505b61078b6107838561063f565b83018261072b565b50505b505050565b5f82821c905092915050565b5f6107ae5f1984600802610793565b1980831691505092915050565b5f6107c6838361079f565b9150826002028217905092915050565b6107df826105c6565b67ffffffffffffffff8111156107f8576107f76103c0565b5b61080282546105fd565b61080d82828561074d565b5f60209050601f83116001811461083e575f841561082c578287015190505b61083685826107bb565b86555061089d565b601f19841661084c8661062d565b5f5b828110156108735784890151825560018201915060208501945060208101905061084e565b86831015610890578489015161088c601f89168261079f565b8355505b6001600288020188555050505b505050505050565b6108ae81610503565b82525050565b5f6020820190506108c75f8301846108a5565b92915050565b5f819050919050565b6108df816108cd565b82525050565b6108ee816106ab565b82525050565b5f60a0820190506109075f8301886108d6565b61091460208301876108d6565b61092160408301866108d6565b61092e60608301856108e5565b61093b60808301846108a5565b9695505050505050565b5f82825260208201905092915050565b5f61095f826105c6565b6109698185610945565b9350610979818560208601610468565b610982816103b0565b840191505092915050565b5f6020820190508181035f8301526109a58184610955565b905092915050565b5f81519050919050565b5f819050602082019050919050565b5f6109d182516108cd565b80915050919050565b5f6109e4826109ad565b826109ee846109b7565b90506109f9816109c6565b92506020821015610a3957610a347fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8360200360080261064e565b831692505b5050919050565b60805160a05160c05160e051610100516101205161014051614042610a915f395f61153801525f6114fd01525f612c9e01525f612c7d01525f61224b01525f6122a101525f6122ca01526140425ff3fe608060405234801561000f575f5ffd5b50600436106101a7575f3560e01c8063715018a6116100f75780639ab24eb011610095578063c3cda5201161006f578063c3cda520146104f7578063c87b56dd14610513578063e985e9c514610543578063f2fde38b14610573576101a7565b80639ab24eb01461048f578063a22cb465146104bf578063b88d4fde146104db576101a7565b80638da5cb5b116100d15780638da5cb5b146104055780638e539e8c1461042357806391ddadf41461045357806395d89b4114610471576101a7565b8063715018a6146103a75780637ecebe00146103b157806384b0196e146103e1576101a7565b806340d097c311610164578063587cde1e1161013e578063587cde1e146102fb5780635c19a95c1461032b5780636352211e1461034757806370a0823114610377576101a7565b806340d097c31461029157806342842e0e146102c15780634bf5d7e9146102dd576101a7565b806301ffc9a7146101ab57806306fdde03146101db578063081812fc146101f9578063095ea7b31461022957806323b872dd146102455780633a46b1a814610261575b5f5ffd5b6101c560048036038101906101c09190613234565b61058f565b6040516101d29190613279565b60405180910390f35b6101e3610670565b6040516101f09190613302565b60405180910390f35b610213600480360381019061020e9190613355565b6106ff565b60405161022091906133bf565b60405180910390f35b610243600480360381019061023e9190613402565b61071a565b005b61025f600480360381019061025a9190613440565b610730565b005b61027b60048036038101906102769190613402565b61082f565b604051610288919061349f565b60405180910390f35b6102ab60048036038101906102a691906134b8565b6108ab565b6040516102b8919061349f565b60405180910390f35b6102db60048036038101906102d69190613440565b6108e0565b005b6102e56108ff565b6040516102f29190613302565b60405180910390f35b610315600480360381019061031091906134b8565b610993565b60405161032291906133bf565b60405180910390f35b610345600480360381019061034091906134b8565b6109f8565b005b610361600480360381019061035c9190613355565b610a11565b60405161036e91906133bf565b60405180910390f35b610391600480360381019061038c91906134b8565b610a22565b60405161039e919061349f565b60405180910390f35b6103af610ad8565b005b6103cb60048036038101906103c691906134b8565b610aeb565b6040516103d8919061349f565b60405180910390f35b6103e9610b31565b6040516103fc97969594939291906135ec565b60405180910390f35b61040d610bd6565b60405161041a91906133bf565b60405180910390f35b61043d60048036038101906104389190613355565b610bfe565b60405161044a919061349f565b60405180910390f35b61045b610c3e565b604051610468919061368e565b60405180910390f35b610479610c4c565b6040516104869190613302565b60405180910390f35b6104a960048036038101906104a491906134b8565b610cdc565b6040516104b6919061349f565b60405180910390f35b6104d960048036038101906104d491906136d1565b610d45565b005b6104f560048036038101906104f0919061383b565b610d5b565b005b610511600480360381019061050c919061391b565b610d80565b005b61052d60048036038101906105289190613355565b610e45565b60405161053a9190613302565b60405180910390f35b61055d600480360381019061055891906139a4565b610eab565b60405161056a9190613279565b60405180910390f35b61058d600480360381019061058891906134b8565b610f39565b005b5f7f80ac58cd000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916148061065957507f5b5e139f000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b80610669575061066882610fbd565b5b9050919050565b60605f805461067e90613a0f565b80601f01602080910402602001604051908101604052809291908181526020018280546106aa90613a0f565b80156106f55780601f106106cc576101008083540402835291602001916106f5565b820191905f5260205f20905b8154815290600101906020018083116106d857829003601f168201915b5050505050905090565b5f61070982611026565b50610713826110ac565b9050919050565b61072c82826107276110e5565b6110ec565b5050565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036107a0575f6040517f64a0ae9200000000000000000000000000000000000000000000000000000000815260040161079791906133bf565b60405180910390fd5b5f6107b383836107ae6110e5565b6110fe565b90508373ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614610829578382826040517f64283d7b00000000000000000000000000000000000000000000000000000000815260040161082093929190613a3f565b60405180910390fd5b50505050565b5f61088761083c83611113565b600b5f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2061117e90919063ffffffff16565b79ffffffffffffffffffffffffffffffffffffffffffffffffffff16905092915050565b5f6108b461126e565b5f600d5f8154809291906108c790613aa1565b9190505590506108d783826112f5565b80915050919050565b6108fa83838360405180602001604052805f815250610d5b565b505050565b6060610909611312565b65ffffffffffff16610919610c3e565b65ffffffffffff1614610958576040517f6ff0714000000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6040518060400160405280601d81526020017f6d6f64653d626c6f636b6e756d6265722666726f6d3d64656661756c74000000815250905090565b5f600a5f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b5f610a016110e5565b9050610a0d8183611321565b5050565b5f610a1b82611026565b9050919050565b5f5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610a93575f6040517f89c62b64000000000000000000000000000000000000000000000000000000008152600401610a8a91906133bf565b60405180910390fd5b60035f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050919050565b610ae061126e565b610ae95f611431565b565b5f60095f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050919050565b5f6060805f5f5f6060610b426114f4565b610b4a61152f565b46305f5f1b5f67ffffffffffffffff811115610b6957610b68613717565b5b604051908082528060200260200182016040528015610b975781602001602082028036833780820191505090505b507f0f00000000000000000000000000000000000000000000000000000000000000959493929190965096509650965096509650965090919293949596565b5f60065f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b5f610c1b610c0b83611113565b600c61117e90919063ffffffff16565b79ffffffffffffffffffffffffffffffffffffffffffffffffffff169050919050565b5f610c47611312565b905090565b606060018054610c5b90613a0f565b80601f0160208091040260200160405190810160405280929190818152602001828054610c8790613a0f565b8015610cd25780601f10610ca957610100808354040283529160200191610cd2565b820191905f5260205f20905b815481529060010190602001808311610cb557829003601f168201915b5050505050905090565b5f610d22600b5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2061156a565b79ffffffffffffffffffffffffffffffffffffffffffffffffffff169050919050565b610d57610d506110e5565b83836115cc565b5050565b610d66848484610730565b610d7a610d716110e5565b85858585611735565b50505050565b83421115610dc557836040517f4683af0e000000000000000000000000000000000000000000000000000000008152600401610dbc919061349f565b60405180910390fd5b5f610e26610e1e7fe48329057bfd03d55e49b547132e39cffd9c1820ad7b9d4c5307691425d15adf898989604051602001610e039493929190613ae8565b604051602081830303815290604052805190602001206118e1565b8585856118fa565b9050610e328187611928565b610e3c8188611321565b50505050505050565b6060610e5082611026565b505f610e5a61197f565b90505f815111610e785760405180602001604052805f815250610ea3565b80610e8284611995565b604051602001610e93929190613b65565b6040516020818303038152906040525b915050919050565b5f60055f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900460ff16905092915050565b610f4161126e565b5f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1603610fb1575f6040517f1e4fbdf7000000000000000000000000000000000000000000000000000000008152600401610fa891906133bf565b60405180910390fd5b610fba81611431565b50565b5f7f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b5f5f61103183611a5f565b90505f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036110a357826040517f7e27328900000000000000000000000000000000000000000000000000000000815260040161109a919061349f565b60405180910390fd5b80915050919050565b5f60045f8381526020019081526020015f205f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b5f33905090565b6110f98383836001611a98565b505050565b5f61110a848484611c57565b90509392505050565b5f5f61111d610c3e565b90508065ffffffffffff16831061116d5782816040517fecd3f81e000000000000000000000000000000000000000000000000000000008152600401611164929190613b88565b60405180910390fd5b61117683611c7d565b915050919050565b5f5f835f018054905090505f5f90505f8290506005831115611202575f6111a484611cd6565b846111af9190613baf565b90506111bd875f0182611e70565b5f015f9054906101000a900465ffffffffffff1665ffffffffffff168665ffffffffffff1610156111f057809150611200565b6001816111fd9190613be2565b92505b505b5f611211875f01878585611e82565b90505f811461126057611232875f0160018361122d9190613baf565b611e70565b5f0160069054906101000a900479ffffffffffffffffffffffffffffffffffffffffffffffffffff16611262565b5f5b94505050505092915050565b6112766110e5565b73ffffffffffffffffffffffffffffffffffffffff16611294610bd6565b73ffffffffffffffffffffffffffffffffffffffff16146112f3576112b76110e5565b6040517f118cdaa70000000000000000000000000000000000000000000000000000000081526004016112ea91906133bf565b60405180910390fd5b565b61130e828260405180602001604052805f815250611ef7565b5050565b5f61131c43611c7d565b905090565b5f61132b83610993565b905081600a5f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167f3134e8a2e6d97e929a7e54011ea5485d7d196dd5f0ba4d4ef95803e8e3fc257f60405160405180910390a461142c818361142786611f1a565b611f2b565b505050565b5f60065f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508160065f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b606061152a60077f000000000000000000000000000000000000000000000000000000000000000061219b90919063ffffffff16565b905090565b606061156560087f000000000000000000000000000000000000000000000000000000000000000061219b90919063ffffffff16565b905090565b5f5f825f018054905090505f81146115c257611594835f0160018361158f9190613baf565b611e70565b5f0160069054906101000a900479ffffffffffffffffffffffffffffffffffffffffffffffffffff166115c4565b5f5b915050919050565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160361163c57816040517f5b08ba1800000000000000000000000000000000000000000000000000000000815260040161163391906133bf565b60405180910390fd5b8060055f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f6101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31836040516117289190613279565b60405180910390a3505050565b5f8373ffffffffffffffffffffffffffffffffffffffff163b11156118da578273ffffffffffffffffffffffffffffffffffffffff1663150b7a02868685856040518563ffffffff1660e01b81526004016117939493929190613c67565b6020604051808303815f875af19250505080156117ce57506040513d601f19601f820116820180604052508101906117cb9190613cc5565b60015b61184f573d805f81146117fc576040519150601f19603f3d011682016040523d82523d5f602084013e611801565b606091505b505f81510361184757836040517f64a0ae9200000000000000000000000000000000000000000000000000000000815260040161183e91906133bf565b60405180910390fd5b805160208201fd5b63150b7a0260e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916146118d857836040517f64a0ae920000000000000000000000000000000000000000000000000000000081526004016118cf91906133bf565b60405180910390fd5b505b5050505050565b5f6118f36118ed612248565b836122fe565b9050919050565b5f5f5f5f61190a8888888861233e565b92509250925061191a8282612425565b829350505050949350505050565b5f61193283612587565b905080821461197a5782816040517f752d88c0000000000000000000000000000000000000000000000000000000008152600401611971929190613cf0565b60405180910390fd5b505050565b606060405180602001604052805f815250905090565b60605f60016119a3846125da565b0190505f8167ffffffffffffffff8111156119c1576119c0613717565b5b6040519080825280601f01601f1916602001820160405280156119f35781602001600182028036833780820191505090505b5090505f82602083010190505b600115611a54578080600190039150507f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a8581611a4957611a48613d17565b5b0494505f8503611a00575b819350505050919050565b5f60025f8381526020019081526020015f205f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b8080611ad057505f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1614155b15611c02575f611adf84611026565b90505f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1614158015611b4957508273ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614155b8015611b5c5750611b5a8184610eab565b155b15611b9e57826040517fa9fbf51f000000000000000000000000000000000000000000000000000000008152600401611b9591906133bf565b60405180910390fd5b8115611c0057838573ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a45b505b8360045f8581526020019081526020015f205f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050505050565b5f5f611c6485858561272b565b9050611c7281866001612936565b809150509392505050565b5f65ffffffffffff8016821115611cce576030826040517f6dfcc650000000000000000000000000000000000000000000000000000000008152600401611cc5929190613d86565b60405180910390fd5b819050919050565b5f60018211611ce757819050611e6b565b5f8290505f600190507001000000000000000000000000000000008210611d1757608082901c9150604081901b90505b680100000000000000008210611d3657604082901c9150602081901b90505b6401000000008210611d5157602082901c9150601081901b90505b620100008210611d6a57601082901c9150600881901b90505b6101008210611d8257600882901c9150600481901b90505b60108210611d9957600482901c9150600281901b90505b60048210611da957600181901b90505b600181600302901c90506001818581611dc557611dc4613d17565b5b048201901c90506001818581611dde57611ddd613d17565b5b048201901c90506001818581611df757611df6613d17565b5b048201901c90506001818581611e1057611e0f613d17565b5b048201901c90506001818581611e2957611e28613d17565b5b048201901c90506001818581611e4257611e41613d17565b5b048201901c9050611e64818581611e5c57611e5b613d17565b5b0482116129ee565b8103925050505b919050565b5f825f528160205f2001905092915050565b5f5b81831015611eec575f611e9784846129f9565b90508465ffffffffffff16611eac8783611e70565b5f015f9054906101000a900465ffffffffffff1665ffffffffffff161115611ed657809250611ee6565b600181611ee39190613be2565b93505b50611e84565b819050949350505050565b611f018383612a1e565b611f15611f0c6110e5565b5f858585611735565b505050565b5f611f2482610a22565b9050919050565b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1614158015611f6657505f81115b15612196575f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1614612080575f5f611ff1600b5f8773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20612b11611fec86612b26565b612b93565b79ffffffffffffffffffffffffffffffffffffffffffffffffffff16915079ffffffffffffffffffffffffffffffffffffffffffffffffffff1691508473ffffffffffffffffffffffffffffffffffffffff167fdec2bacdd2f05b59de34da9b523dff8be42e5e38e818c82fdb0bae774387a7248383604051612075929190613dad565b60405180910390a250505b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1614612195575f5f612106600b5f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20612bd261210186612b26565b612b93565b79ffffffffffffffffffffffffffffffffffffffffffffffffffff16915079ffffffffffffffffffffffffffffffffffffffffffffffffffff1691508373ffffffffffffffffffffffffffffffffffffffff167fdec2bacdd2f05b59de34da9b523dff8be42e5e38e818c82fdb0bae774387a724838360405161218a929190613dad565b60405180910390a250505b5b505050565b606060ff5f1b83146121b7576121b083612be7565b9050612242565b8180546121c390613a0f565b80601f01602080910402602001604051908101604052809291908181526020018280546121ef90613a0f565b801561223a5780601f106122115761010080835404028352916020019161223a565b820191905f5260205f20905b81548152906001019060200180831161221d57829003601f168201915b505050505090505b92915050565b5f7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff163073ffffffffffffffffffffffffffffffffffffffff161480156122c357507f000000000000000000000000000000000000000000000000000000000000000046145b156122f0577f000000000000000000000000000000000000000000000000000000000000000090506122fb565b6122f8612c59565b90505b90565b5f6040517f190100000000000000000000000000000000000000000000000000000000000081528360028201528260228201526042812091505092915050565b5f5f5f7f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0845f1c111561237a575f60038592509250925061241b565b5f6001888888886040515f815260200160405260405161239d9493929190613de3565b6020604051602081039080840390855afa1580156123bd573d5f5f3e3d5ffd5b5050506020604051035190505f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff160361240e575f60015f5f1b9350935093505061241b565b805f5f5f1b935093509350505b9450945094915050565b5f600381111561243857612437613e26565b5b82600381111561244b5761244a613e26565b5b0315612583576001600381111561246557612464613e26565b5b82600381111561247857612477613e26565b5b036124af576040517ff645eedf00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600260038111156124c3576124c2613e26565b5b8260038111156124d6576124d5613e26565b5b0361251a57805f1c6040517ffce698f7000000000000000000000000000000000000000000000000000000008152600401612511919061349f565b60405180910390fd5b60038081111561252d5761252c613e26565b5b8260038111156125405761253f613e26565b5b0361258257806040517fd78bce0c0000000000000000000000000000000000000000000000000000000081526004016125799190613e53565b60405180910390fd5b5b5050565b5f60095f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f815480929190600101919050559050919050565b5f5f5f90507a184f03e93ff9f4daa797ed6e38ed64bf6a1f0100000000000000008310612636577a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000838161262c5761262b613d17565b5b0492506040810190505b6d04ee2d6d415b85acef81000000008310612673576d04ee2d6d415b85acef8100000000838161266957612668613d17565b5b0492506020810190505b662386f26fc1000083106126a257662386f26fc10000838161269857612697613d17565b5b0492506010810190505b6305f5e10083106126cb576305f5e10083816126c1576126c0613d17565b5b0492506008810190505b61271083106126f05761271083816126e6576126e5613d17565b5b0492506004810190505b60648310612713576064838161270957612708613d17565b5b0492506002810190505b600a8310612722576001810190505b80915050919050565b5f5f61273684611a5f565b90505f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161461277757612776818486612cee565b5b5f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614612802576127b65f855f5f611a98565b600160035f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825403925050819055505b5f73ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff161461288157600160035f8773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055505b8460025f8681526020019081526020015f205f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550838573ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a4809150509392505050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036129825761297f600c612bd261297a84612b26565b612b93565b50505b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036129ce576129cb600c612b116129c684612b26565b612b93565b50505b6129e96129da84610993565b6129e384610993565b83611f2b565b505050565b5f8115159050919050565b5f6002828418612a099190613e6c565b828416612a169190613be2565b905092915050565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603612a8e575f6040517f64a0ae92000000000000000000000000000000000000000000000000000000008152600401612a8591906133bf565b60405180910390fd5b5f612a9a83835f6110fe565b90505f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614612b0c575f6040517f73c6ac6e000000000000000000000000000000000000000000000000000000008152600401612b0391906133bf565b60405180910390fd5b505050565b5f8183612b1e9190613ec1565b905092915050565b5f79ffffffffffffffffffffffffffffffffffffffffffffffffffff8016821115612b8b5760d0826040517f6dfcc650000000000000000000000000000000000000000000000000000000008152600401612b82929190613f47565b60405180910390fd5b819050919050565b5f5f612bc6612ba0610c3e565b612bb6612bac8861156a565b868863ffffffff16565b87612db19092919063ffffffff16565b91509150935093915050565b5f8183612bdf9190613f6e565b905092915050565b60605f612bf383612dcc565b90505f602067ffffffffffffffff811115612c1157612c10613717565b5b6040519080825280601f01601f191660200182016040528015612c435781602001600182028036833780820191505090505b5090508181528360208201528092505050919050565b5f7f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f7f00000000000000000000000000000000000000000000000000000000000000007f00000000000000000000000000000000000000000000000000000000000000004630604051602001612cd3959493929190613fbb565b60405160208183030381529060405280519060200120905090565b612cf9838383612e1a565b612dac575f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603612d6d57806040517f7e273289000000000000000000000000000000000000000000000000000000008152600401612d64919061349f565b60405180910390fd5b81816040517f177e802f000000000000000000000000000000000000000000000000000000008152600401612da3929190613cf0565b60405180910390fd5b505050565b5f5f612dc0855f018585612eda565b91509150935093915050565b5f5f60ff835f1c169050601f811115612e11576040517fb3512b0c00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b80915050919050565b5f5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1614158015612ed157508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161480612e925750612e918484610eab565b5b80612ed057508273ffffffffffffffffffffffffffffffffffffffff16612eb8836110ac565b73ffffffffffffffffffffffffffffffffffffffff16145b5b90509392505050565b5f5f5f858054905090505f8111156130e6575f612f0387600184612efe9190613baf565b611e70565b90505f815f015f9054906101000a900465ffffffffffff1690505f825f0160069054906101000a900479ffffffffffffffffffffffffffffffffffffffffffffffffffff1690508765ffffffffffff168265ffffffffffff161115612f94576040517f2520601d00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b8765ffffffffffff168265ffffffffffff1603612ffe5786835f0160066101000a81548179ffffffffffffffffffffffffffffffffffffffffffffffffffff021916908379ffffffffffffffffffffffffffffffffffffffffffffffffffff1602179055506130d7565b8860405180604001604052808a65ffffffffffff1681526020018979ffffffffffffffffffffffffffffffffffffffffffffffffffff16815250908060018154018082558091505060019003905f5260205f20015f909190919091505f820151815f015f6101000a81548165ffffffffffff021916908365ffffffffffff1602179055506020820151815f0160066101000a81548179ffffffffffffffffffffffffffffffffffffffffffffffffffff021916908379ffffffffffffffffffffffffffffffffffffffffffffffffffff16021790555050505b808795509550505050506131c6565b8560405180604001604052808765ffffffffffff1681526020018679ffffffffffffffffffffffffffffffffffffffffffffffffffff16815250908060018154018082558091505060019003905f5260205f20015f909190919091505f820151815f015f6101000a81548165ffffffffffff021916908365ffffffffffff1602179055506020820151815f0160066101000a81548179ffffffffffffffffffffffffffffffffffffffffffffffffffff021916908379ffffffffffffffffffffffffffffffffffffffffffffffffffff16021790555050505f8492509250505b935093915050565b5f604051905090565b5f5ffd5b5f5ffd5b5f7fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b613213816131df565b811461321d575f5ffd5b50565b5f8135905061322e8161320a565b92915050565b5f60208284031215613249576132486131d7565b5b5f61325684828501613220565b91505092915050565b5f8115159050919050565b6132738161325f565b82525050565b5f60208201905061328c5f83018461326a565b92915050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f6132d482613292565b6132de818561329c565b93506132ee8185602086016132ac565b6132f7816132ba565b840191505092915050565b5f6020820190508181035f83015261331a81846132ca565b905092915050565b5f819050919050565b61333481613322565b811461333e575f5ffd5b50565b5f8135905061334f8161332b565b92915050565b5f6020828403121561336a576133696131d7565b5b5f61337784828501613341565b91505092915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6133a982613380565b9050919050565b6133b98161339f565b82525050565b5f6020820190506133d25f8301846133b0565b92915050565b6133e18161339f565b81146133eb575f5ffd5b50565b5f813590506133fc816133d8565b92915050565b5f5f60408385031215613418576134176131d7565b5b5f613425858286016133ee565b925050602061343685828601613341565b9150509250929050565b5f5f5f60608486031215613457576134566131d7565b5b5f613464868287016133ee565b9350506020613475868287016133ee565b925050604061348686828701613341565b9150509250925092565b61349981613322565b82525050565b5f6020820190506134b25f830184613490565b92915050565b5f602082840312156134cd576134cc6131d7565b5b5f6134da848285016133ee565b91505092915050565b5f7fff0000000000000000000000000000000000000000000000000000000000000082169050919050565b613517816134e3565b82525050565b5f819050919050565b61352f8161351d565b82525050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b61356781613322565b82525050565b5f613578838361355e565b60208301905092915050565b5f602082019050919050565b5f61359a82613535565b6135a4818561353f565b93506135af8361354f565b805f5b838110156135df5781516135c6888261356d565b97506135d183613584565b9250506001810190506135b2565b5085935050505092915050565b5f60e0820190506135ff5f83018a61350e565b818103602083015261361181896132ca565b9050818103604083015261362581886132ca565b90506136346060830187613490565b61364160808301866133b0565b61364e60a0830185613526565b81810360c08301526136608184613590565b905098975050505050505050565b5f65ffffffffffff82169050919050565b6136888161366e565b82525050565b5f6020820190506136a15f83018461367f565b92915050565b6136b08161325f565b81146136ba575f5ffd5b50565b5f813590506136cb816136a7565b92915050565b5f5f604083850312156136e7576136e66131d7565b5b5f6136f4858286016133ee565b9250506020613705858286016136bd565b9150509250929050565b5f5ffd5b5f5ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b61374d826132ba565b810181811067ffffffffffffffff8211171561376c5761376b613717565b5b80604052505050565b5f61377e6131ce565b905061378a8282613744565b919050565b5f67ffffffffffffffff8211156137a9576137a8613717565b5b6137b2826132ba565b9050602081019050919050565b828183375f83830152505050565b5f6137df6137da8461378f565b613775565b9050828152602081018484840111156137fb576137fa613713565b5b6138068482856137bf565b509392505050565b5f82601f8301126138225761382161370f565b5b81356138328482602086016137cd565b91505092915050565b5f5f5f5f60808587031215613853576138526131d7565b5b5f613860878288016133ee565b9450506020613871878288016133ee565b935050604061388287828801613341565b925050606085013567ffffffffffffffff8111156138a3576138a26131db565b5b6138af8782880161380e565b91505092959194509250565b5f60ff82169050919050565b6138d0816138bb565b81146138da575f5ffd5b50565b5f813590506138eb816138c7565b92915050565b6138fa8161351d565b8114613904575f5ffd5b50565b5f81359050613915816138f1565b92915050565b5f5f5f5f5f5f60c08789031215613935576139346131d7565b5b5f61394289828a016133ee565b965050602061395389828a01613341565b955050604061396489828a01613341565b945050606061397589828a016138dd565b935050608061398689828a01613907565b92505060a061399789828a01613907565b9150509295509295509295565b5f5f604083850312156139ba576139b96131d7565b5b5f6139c7858286016133ee565b92505060206139d8858286016133ee565b9150509250929050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f6002820490506001821680613a2657607f821691505b602082108103613a3957613a386139e2565b5b50919050565b5f606082019050613a525f8301866133b0565b613a5f6020830185613490565b613a6c60408301846133b0565b949350505050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f613aab82613322565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8203613add57613adc613a74565b5b600182019050919050565b5f608082019050613afb5f830187613526565b613b0860208301866133b0565b613b156040830185613490565b613b226060830184613490565b95945050505050565b5f81905092915050565b5f613b3f82613292565b613b498185613b2b565b9350613b598185602086016132ac565b80840191505092915050565b5f613b708285613b35565b9150613b7c8284613b35565b91508190509392505050565b5f604082019050613b9b5f830185613490565b613ba8602083018461367f565b9392505050565b5f613bb982613322565b9150613bc483613322565b9250828203905081811115613bdc57613bdb613a74565b5b92915050565b5f613bec82613322565b9150613bf783613322565b9250828201905080821115613c0f57613c0e613a74565b5b92915050565b5f81519050919050565b5f82825260208201905092915050565b5f613c3982613c15565b613c438185613c1f565b9350613c538185602086016132ac565b613c5c816132ba565b840191505092915050565b5f608082019050613c7a5f8301876133b0565b613c8760208301866133b0565b613c946040830185613490565b8181036060830152613ca68184613c2f565b905095945050505050565b5f81519050613cbf8161320a565b92915050565b5f60208284031215613cda57613cd96131d7565b5b5f613ce784828501613cb1565b91505092915050565b5f604082019050613d035f8301856133b0565b613d106020830184613490565b9392505050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601260045260245ffd5b5f819050919050565b5f819050919050565b5f613d70613d6b613d6684613d44565b613d4d565b6138bb565b9050919050565b613d8081613d56565b82525050565b5f604082019050613d995f830185613d77565b613da66020830184613490565b9392505050565b5f604082019050613dc05f830185613490565b613dcd6020830184613490565b9392505050565b613ddd816138bb565b82525050565b5f608082019050613df65f830187613526565b613e036020830186613dd4565b613e106040830185613526565b613e1d6060830184613526565b95945050505050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602160045260245ffd5b5f602082019050613e665f830184613526565b92915050565b5f613e7682613322565b9150613e8183613322565b925082613e9157613e90613d17565b5b828204905092915050565b5f79ffffffffffffffffffffffffffffffffffffffffffffffffffff82169050919050565b5f613ecb82613e9c565b9150613ed683613e9c565b9250828203905079ffffffffffffffffffffffffffffffffffffffffffffffffffff811115613f0857613f07613a74565b5b92915050565b5f819050919050565b5f613f31613f2c613f2784613f0e565b613d4d565b6138bb565b9050919050565b613f4181613f17565b82525050565b5f604082019050613f5a5f830185613f38565b613f676020830184613490565b9392505050565b5f613f7882613e9c565b9150613f8383613e9c565b9250828201905079ffffffffffffffffffffffffffffffffffffffffffffffffffff811115613fb557613fb4613a74565b5b92915050565b5f60a082019050613fce5f830188613526565b613fdb6020830187613526565b613fe86040830186613526565b613ff56060830185613490565b61400260808301846133b0565b969550505050505056fea2646970667358221220aecb225da938640168093a9fded5e82601fa5ddbf5a1bf59a825700058d98ed064736f6c634300081e0033";

const CONTRACT_ABI = [{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"symbol","type":"string"},{"internalType":"address","name":"initialOwner","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"CheckpointUnorderedInsertion","type":"error"},{"inputs":[],"name":"ECDSAInvalidSignature","type":"error"},{"inputs":[{"internalType":"uint256","name":"length","type":"uint256"}],"name":"ECDSAInvalidSignatureLength","type":"error"},{"inputs":[{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"ECDSAInvalidSignatureS","type":"error"},{"inputs":[{"internalType":"uint256","name":"timepoint","type":"uint256"},{"internalType":"uint48","name":"clock","type":"uint48"}],"name":"ERC5805FutureLookup","type":"error"},{"inputs":[],"name":"ERC6372InconsistentClock","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"address","name":"owner","type":"address"}],"name":"ERC721IncorrectOwner","type":"error"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ERC721InsufficientApproval","type":"error"},{"inputs":[{"internalType":"address","name":"approver","type":"address"}],"name":"ERC721InvalidApprover","type":"error"},{"inputs":[{"internalType":"address","name":"operator","type":"address"}],"name":"ERC721InvalidOperator","type":"error"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"ERC721InvalidOwner","type":"error"},{"inputs":[{"internalType":"address","name":"receiver","type":"address"}],"name":"ERC721InvalidReceiver","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"}],"name":"ERC721InvalidSender","type":"error"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ERC721NonexistentToken","type":"error"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"currentNonce","type":"uint256"}],"name":"InvalidAccountNonce","type":"error"},{"inputs":[],"name":"InvalidShortString","type":"error"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"OwnableInvalidOwner","type":"error"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"OwnableUnauthorizedAccount","type":"error"},{"inputs":[{"internalType":"uint8","name":"bits","type":"uint8"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"SafeCastOverflowedUintDowncast","type":"error"},{"inputs":[{"internalType":"string","name":"str","type":"string"}],"name":"StringTooLong","type":"error"},{"inputs":[{"internalType":"uint256","name":"expiry","type":"uint256"}],"name":"VotesExpiredSignature","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"delegator","type":"address"},{"indexed":true,"internalType":"address","name":"fromDelegate","type":"address"},{"indexed":true,"internalType":"address","name":"toDelegate","type":"address"}],"name":"DelegateChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"delegate","type":"address"},{"indexed":false,"internalType":"uint256","name":"previousVotes","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"newVotes","type":"uint256"}],"name":"DelegateVotesChanged","type":"event"},{"anonymous":false,"inputs":[],"name":"EIP712DomainChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"CLOCK_MODE","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"clock","outputs":[{"internalType":"uint48","name":"","type":"uint48"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"delegatee","type":"address"}],"name":"delegate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"delegatee","type":"address"},{"internalType":"uint256","name":"nonce","type":"uint256"},{"internalType":"uint256","name":"expiry","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"delegateBySig","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"delegates","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"eip712Domain","outputs":[{"internalType":"bytes1","name":"fields","type":"bytes1"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"version","type":"string"},{"internalType":"uint256","name":"chainId","type":"uint256"},{"internalType":"address","name":"verifyingContract","type":"address"},{"internalType":"bytes32","name":"salt","type":"bytes32"},{"internalType":"uint256[]","name":"extensions","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"timepoint","type":"uint256"}],"name":"getPastTotalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"timepoint","type":"uint256"}],"name":"getPastVotes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"getVotes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"nonces","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"}],"name":"safeMint","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}];

async function main() {
  console.log("🚀 Starting ERC721 Votes NFT deployment...");

  // Constructor parameters - these will be modified by Bolt based on user input
  const NFT_NAME = "VotesNFT";
  const NFT_SYMBOL = "VNFT";
  const OWNER_ADDRESS = process.env.OWNER_ADDRESS || "0x0000000000000000000000000000000000000000"; // Default to deployer if not specified

  console.log(`\n📋 Deployment parameters:`);
  console.log(`   Name: ${NFT_NAME}`);
  console.log(`   Symbol: ${NFT_SYMBOL}`);
  console.log(`   Owner: ${OWNER_ADDRESS === "0x0000000000000000000000000000000000000000" ? "Deployer Address" : OWNER_ADDRESS}`);

  try {
    // Get configuration from environment
    const PRIVATE_KEY = process.env.PRIVATE_KEY;
    const RPC_URL = process.env.RPC_URL || "https://evm-rpc-testnet.sei-apis.com";

    if (!PRIVATE_KEY) {
      console.error("\n❌ Error: PRIVATE_KEY environment variable is required");
      console.log("\nUsage:");
      console.log("PRIVATE_KEY=your_private_key npm run deploy");
      console.log("PRIVATE_KEY=your_private_key OWNER_ADDRESS=0x... npm run deploy");
      process.exit(1);
    }

    // Initialize provider and wallet
    const provider = new ethers.JsonRpcProvider(RPC_URL);
    const wallet = new ethers.Wallet(PRIVATE_KEY, provider);
    
    console.log(`\n🔑 Deployer: ${wallet.address}`);

    // Determine the actual owner address
    const actualOwner = OWNER_ADDRESS === "0x0000000000000000000000000000000000000000" ? wallet.address : OWNER_ADDRESS;

    // Check balance
    const balance = await provider.getBalance(wallet.address);
    console.log(`   Balance: ${ethers.formatEther(balance)} SEI`);

    if (balance === 0n) {
      console.error("\n❌ Error: Insufficient balance. Please get test SEI from the faucet:");
      console.log("   https://atlantic-2.app.sei.io/faucet");
      process.exit(1);
    }

    // Create contract factory
    const contractFactory = new ethers.ContractFactory(CONTRACT_ABI, CONTRACT_BYTECODE, wallet);

    // Prepare deployment
    console.log("\n⏳ Deploying contract...");
    
    // Deploy the contract
    const contract = await contractFactory.deploy(NFT_NAME, NFT_SYMBOL, actualOwner);
    
    // Wait for deployment to complete
    await contract.waitForDeployment();
    
    // Get the deployed contract address
    const nftAddress = await contract.getAddress();

    console.log(`\n✅ NFT deployed successfully!`);
    console.log(`   Address: ${nftAddress}`);

    // Get contract details for verification
    const name = await contract.name();
    const symbol = await contract.symbol();
    const owner = await contract.owner();
    
    console.log(`\n📊 NFT details:`);
    console.log(`   Name: ${name}`);
    console.log(`   Symbol: ${symbol}`);
    console.log(`   Owner: ${owner}`);
    console.log(`   Voting Features: ✅ Enabled`);
    console.log(`   Features: ✅ Voting Delegation, ✅ Checkpointing, ✅ Ownable, ✅ Auto-increment IDs`);

    // Save deployment info
    const deploymentInfo = {
      network: "sei-testnet",
      nftAddress: nftAddress,
      nftName: NFT_NAME,
      nftSymbol: NFT_SYMBOL,
      owner: owner,
      deploymentTransaction: "See explorer for transaction details",
      deployer: wallet.address,
      deployedAt: new Date().toISOString(),
      features: {
        votes: true,
        delegation: true,
        checkpointing: true,
        ownable: true,
        autoIncrementIds: true
      }
    };

    // Save deployment info to deployments directory
    const deploymentsPath = path.join(__dirname, "../deployments");
    if (!fs.existsSync(deploymentsPath)) {
      fs.mkdirSync(deploymentsPath, { recursive: true });
    }

    fs.writeFileSync(
      path.join(deploymentsPath, "sei-testnet-deployment.json"),
      JSON.stringify(deploymentInfo, null, 2)
    );

    // Save contract ABI
    fs.writeFileSync(
      path.join(deploymentsPath, "ERC721_flavor_votes.json"),
      JSON.stringify({
        abi: CONTRACT_ABI,
        bytecode: CONTRACT_BYTECODE
      }, null, 2)
    );

    console.log(`\n📁 Deployment info saved to deployments/`);

    // SEI Testnet specific information
    console.log("\n🌊 SEI Testnet Deployment Info:");
    console.log(`   Network: SEI Atlantic-2 Testnet`);
    console.log(`   Chain ID: 1328`);
    console.log(`   Explorer: https://testnet.seistream.app/contracts/${nftAddress}`);
    console.log(`   Faucet: https://atlantic-2.app.sei.io/faucet`);
    
    console.log("\n🎉 Deployment complete!");

  } catch (error) {
    console.error("\n❌ Deployment failed:", error.message);
    process.exit(1);
  }
}

main();